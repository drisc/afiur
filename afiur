#!/bin/bash

origin="$2"

true_days=$(( ($(date --date="00:00 UTC" +%s) - $(date --date="$origin UTC" +%s) )/86400 + 1 ))

decimal_date=$(awk "BEGIN{printf \"%.4f\n\", $true_days/10/10/4}")

# Day
case "$decimal_date" in
    [0-9][0-9].[0-9]000) d="40";;
    [0-9][0-9].[0-9]025) d="01";;
    [0-9][0-9].[0-9]050) d="02";;
    [0-9][0-9].[0-9]075) d="03";;
    [0-9][0-9].[0-9]100) d="04";;
    [0-9][0-9].[0-9]125) d="05";;
    [0-9][0-9].[0-9]150) d="06";;
    [0-9][0-9].[0-9]175) d="07";;
    [0-9][0-9].[0-9]200) d="08";;
    [0-9][0-9].[0-9]225) d="09";;
    [0-9][0-9].[0-9]250) d="10";;
    [0-9][0-9].[0-9]275) d="11";;
    [0-9][0-9].[0-9]300) d="12";;
    [0-9][0-9].[0-9]325) d="13";;
    [0-9][0-9].[0-9]350) d="14";;
    [0-9][0-9].[0-9]375) d="15";;
    [0-9][0-9].[0-9]400) d="16";;
    [0-9][0-9].[0-9]425) d="17";;
    [0-9][0-9].[0-9]450) d="18";;
    [0-9][0-9].[0-9]475) d="19";;
    [0-9][0-9].[0-9]500) d="20";;
    [0-9][0-9].[0-9]525) d="21";;
    [0-9][0-9].[0-9]550) d="22";;
    [0-9][0-9].[0-9]575) d="23";;
    [0-9][0-9].[0-9]600) d="24";;
    [0-9][0-9].[0-9]625) d="25";;
    [0-9][0-9].[0-9]650) d="26";;
    [0-9][0-9].[0-9]675) d="27";;
    [0-9][0-9].[0-9]700) d="28";;
    [0-9][0-9].[0-9]725) d="29";;
    [0-9][0-9].[0-9]750) d="30";;
    [0-9][0-9].[0-9]775) d="31";;
    [0-9][0-9].[0-9]800) d="32";;
    [0-9][0-9].[0-9]825) d="33";;
    [0-9][0-9].[0-9]850) d="34";;
    [0-9][0-9].[0-9]875) d="35";;
    [0-9][0-9].[0-9]900) d="36";;
    [0-9][0-9].[0-9]925) d="37";;
    [0-9][0-9].[0-9]950) d="38";;
    [0-9][0-9].[0-9]874) d="39";;

esac

# Month
case "$decimal_date" in
    [0-9][0-9].0[0-9][0-9][0-9]) m="01";;
    [0-9][0-9].1[0-9][0-9][0-9]) m="02";;
    [0-9][0-9].2[0-9][0-9][0-9]) m="03";;
    [0-9][0-9].3[0-9][0-9][0-9]) m="04";;
    [0-9][0-9].4[0-9][0-9][0-9]) m="05";;
    [0-9][0-9].5[0-9][0-9][0-9]) m="06";;
    [0-9][0-9].6[0-9][0-9][0-9]) m="07";;
    [0-9][0-9].7[0-9][0-9][0-9]) m="08";;
    [0-9][0-9].8[0-9][0-9][0-9]) m="09";;
    [0-9][0-9].9[0-9][0-9][0-9]) m="10";;
esac

y=$(( ($true_days) /10/10/4))


# Commands & Output
case "$1" in
    -td) echo "$true_days";;
    -dd) echo "$decimal_date";;
    -sd) echo "$y-$m-$d";;
    *  ) echo "Please select mode: -td (true days), -dd (decimal days), -sd (standard days)";;
esac
